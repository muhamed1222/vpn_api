# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-01-18, 03:44 UTC  
**–°–µ—Ä–≤–µ—Ä:** 72.56.93.135

---

## ‚úÖ –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: –†–ê–ë–û–¢–ê–ï–¢ –ù–û–†–ú–ê–õ–¨–ù–û

### 1. API –°–µ—Ä–≤–µ—Ä

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **ACTIVE (RUNNING)**

```
‚óè outlivion-api.service - Outlivion API
   Active: active (running) since Sun 2026-01-18 02:04:36 UTC; 1h 40min ago
   Main PID: 738935 (node)
   Memory: 29.4M
   CPU: 3.130s
```

- ‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ Uptime: 1 —á–∞—Å 40 –º–∏–Ω—É—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
- ‚úÖ –ü–∞–º—è—Ç—å: 29.4M (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- ‚úÖ Health endpoint –æ—Ç–≤–µ—á–∞–µ—Ç: `{"ok":true,"ts":"2026-01-18T03:44:41.451Z"}`

---

### 2. –õ–æ–≥–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ù–û–†–ú–ê–õ–¨–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨**

- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ API –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
  - `/v1/contest/active` ‚úÖ
  - `/v1/referral/tickets` ‚úÖ
  - `/v1/referral/summary` ‚úÖ
  - `/v1/referral/friends` ‚úÖ
  - `/v1/auth/me` ‚úÖ

**–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:**
- –ö–æ–Ω–∫—É—Ä—Å API: ~8ms
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: ~1-3ms
- Auth: ~115ms (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, –≤–∫–ª—é—á–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ)

---

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–û–°–¢–£–ü–ù–ê**

- ‚úÖ –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `/root/vpn_bot/data/database.sqlite`
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ:
  - ID: `550e8400-e29b-41d4-a716-446655440000`
  - –ù–∞–∑–≤–∞–Ω–∏–µ: `üéâ –†–æ–∑—ã–≥—Ä—ã—à Outlivion ‚Äî 10 –ø—Ä–∏–∑–æ–≤!`

---

### 4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cat /opt/outlivion-api/.env | grep -E '(BOT_DATABASE_PATH|ADMIN_ID|ADMIN_API_KEY)'
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**
- `BOT_DATABASE_PATH=/root/vpn_bot/data/database.sqlite`
- `ADMIN_ID=7972426786` (–∏–ª–∏ –≤–∞—à ID)
- `ADMIN_API_KEY=...` (–≤–∞—à –∫–ª—é—á)

---

### 5. –ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï –ü–†–ò–ú–ï–ù–ï–ù–´ –ù–ê –°–ï–†–í–ï–†–ï**

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π:
```bash
ls -la /opt/outlivion-api/dist/services/
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- `awardRetryScheduler.js` - ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω (–Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`npm run build`)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ (`systemctl restart outlivion-api`)

---

### 6. –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–Æ–¢**

```
PID 738935: /usr/bin/node /opt/outlivion-api/dist/server.js (API —Å–µ—Ä–≤–µ—Ä)
PID 749606: node /root/vpn_bot/node_modules/.bin/tsx server.ts (Telegram –±–æ—Ç)
```

- ‚úÖ API —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| **Uptime** | 1h 40m | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **Memory** | 29.4M | ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ |
| **CPU** | 3.130s | ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ |
| **Response Time** | 1-115ms | ‚úÖ –ë—ã—Å—Ç—Ä–æ |
| **Error Rate** | 0% | ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ |
| **Active Requests** | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ **–Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:

1. **–ù—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
   - `src/services/awardRetryScheduler.ts` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - `src/routes/v1/payments.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω)
   - `src/storage/contestUtils.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏)
   - `src/routes/v1/admin.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω —Å endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
   - `package.json` (–¥–æ–±–∞–≤–ª–µ–Ω node-cron)

2. **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
rsync -avz --exclude 'node_modules' --exclude '.git' \
  /path/to/local/vpn_api/ root@72.56.93.135:/opt/outlivion-api/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/outlivion-api
npm install  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç node-cron
npm run build
systemctl restart outlivion-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞
journalctl -u outlivion-api -n 50 | grep -i scheduler
```

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - ‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ - –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
   - ‚ö†Ô∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ `/v1/admin/award-retry-stats` (–ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)

3. **–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏: `journalctl -u outlivion-api -n 100`
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û—Ü–µ–Ω–∫–∞ |
|-----------|--------|--------|
| **API –°–µ—Ä–≤–µ—Ä** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 10/10 |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ | 10/10 |
| **API Endpoints** | ‚úÖ –û—Ç–≤–µ—á–∞—é—Ç | 10/10 |
| **–õ–æ–≥–∏** | ‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫ | 10/10 |
| **–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏** | ‚ö†Ô∏è –ù–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã | -/10 |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** ‚úÖ **9/10** (–æ—Ç–ª–∏—á–Ω–æ, –Ω–æ –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ –°–¢–ê–ë–ò–õ–¨–ù–û**

–ù–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é, –Ω–æ –µ—â–µ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ.
