# –¢–∞–π–º–∏–Ω–≥ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫

**–í–∞–∂–Ω–æ –ø–æ–Ω—è—Ç—å:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 –º–∏–Ω—É—Ç - —ç—Ç–æ –ù–ï –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤!

---

## –î–≤–∞ —Ç–∏–ø–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

### 1. üü¢ –ü–µ—Ä–≤–∏—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (–ú–ì–ù–û–í–ï–ù–ù–û–ï)

**–ö–æ–≥–¥–∞:** –°—Ä–∞–∑—É –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç–µ–∂–∞  
**–ì–¥–µ:** –í webhook handler –∏–ª–∏ –≤ –±–æ—Ç–µ  
**–ó–∞–¥–µ—Ä–∂–∫–∞:** –ù–ï–¢ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

#### –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```
–ü–ª–∞—Ç–µ–∂ –æ—Ç YooKassa/Telegram
         ‚Üì
    [< 1 —Å–µ–∫—É–Ω–¥–∞]
         ‚Üì
Webhook –ø–æ–ª—É—á–µ–Ω ‚Üí payments.ts
         ‚Üì
    [–º–≥–Ω–æ–≤–µ–Ω–Ω–æ]
         ‚Üì
awardTicketsForPayment() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –°–†–ê–ó–£
         ‚Üì
    [–º–≥–Ω–æ–≤–µ–Ω–Ω–æ]
         ‚Üì
SQL INSERT –≤ ticket_ledger
         ‚Üì
    [< 100ms]
         ‚Üì
‚úÖ –ë–ò–õ–ï–¢–´ –ù–ê–ß–ò–°–õ–ï–ù–´
```

**–ö–æ–¥ –≤ `payments.ts` (—Å—Ç—Ä–æ–∫–∞ 158-170):**
```typescript
// –í–´–ó–´–í–ê–ï–¢–°–Ø –°–†–ê–ó–£ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç–µ–∂–∞
const ticketsAwarded = await awardTicketsForPayment(
  botDbPath,
  tgId,
  orderId,
  planId,
  orderCreatedAt
);

if (ticketsAwarded) {
  // –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É –∂–µ
  fastify.log.info({ tgId, orderId, planId }, 
    '[Webhook] ‚úÖ Tickets awarded successfully'
  );
}
```

**–ò—Ç–æ–≥–æ:** –ï—Å–ª–∏ –ø–ª–∞—Ç–µ–∂ –æ–±—Ä–∞–±–æ—Ç–∞–Ω —É—Å–ø–µ—à–Ω–æ, –±–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è **–°–†–ê–ó–£**, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏.

---

### 2. üü° –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (–ö–ê–ñ–î–´–ï 5 –ú–ò–ù–£–¢)

**–ö–æ–≥–¥–∞:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –£–ü–ê–õ–û —Å –æ—à–∏–±–∫–æ–π  
**–ì–¥–µ:** `AwardRetryScheduler`  
**–ó–∞–¥–µ—Ä–∂–∫–∞:** –î–æ 5 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—à–∏–±–∫–∏)

#### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:

```
–ï—Å–ª–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —É–ø–∞–ª–æ —Å –æ—à–∏–±–∫–æ–π:
         ‚Üì
–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤ (addToRetryQueue)
         ‚Üì
    [–û–∂–∏–¥–∞–Ω–∏–µ –¥–æ 5 –º–∏–Ω—É—Ç]
         ‚Üì
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
         ‚Üì
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—á–µ—Ä–µ–¥—å
         ‚Üì
–ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
         ‚Üì
–î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –º–∞–∫—Å–∏–º—É–º
```

**–ö–æ–¥ –≤ `awardRetryScheduler.ts` (—Å—Ç—Ä–æ–∫–∞ 30-31):**
```typescript
// –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ö–ê–ñ–î–´–ï 5 –ú–ò–ù–£–¢
this.retryTask = cron.schedule('*/5 * * * *', async () => {
  await this.processRetryQueue();
});
```

**–ò—Ç–æ–≥–æ:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω—É–∂–µ–Ω **—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—à–∏–±–æ–∫**, –Ω–µ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è.

---

## –ü–æ—á–µ–º—É –±–∏–ª–µ—Ç—ã –º–æ–≥—É—Ç –Ω–µ –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è —Å—Ä–∞–∑—É

### ‚ùå –ù–ï –∏–∑-–∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (–æ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–æ–≤)

### ‚úÖ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

#### 1. –ü–ª–∞—Ç–µ–∂ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ—Ç–æ–º, –∞ –Ω–µ API

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ —á–µ—Ä–µ–∑ API webhook)
- API webhook –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ë–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –≤ –±–æ—Ç–µ, –Ω–æ —Å –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–∫–æ–π/—Ç–∞–π–º–∏–Ω–≥–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞: `/root/vpn_bot/logs/` –∏–ª–∏ —á–µ—Ä–µ–∑ `journalctl`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `OrderProcessingService.activateOrder()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

#### 2. –ó–∞–∫–∞–∑ —É–∂–µ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å `COMPLETED`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ –∑–∞–∫–∞–∑ —É–∂–µ `COMPLETED` –¥–æ webhook
- Webhook –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 59-62 –≤ `payments.ts`)

```typescript
const orderRow = ordersRepo.getOrder(orderId);
if (!orderRow) {
  // –ó–∞–∫–∞–∑–∞ –Ω–µ—Ç –≤ API –±–∞–∑–µ - webhook –Ω–µ –Ω–∞—á–∏—Å–ª–∏—Ç –±–∏–ª–µ—Ç—ã
  return reply.status(200).send({ ok: true });
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –±–æ—Ç–µ (–Ω–µ–¥–∞–≤–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –Ω–∞—á–∏—Å–ª—è–µ—Ç –±–∏–ª–µ—Ç—ã –¥–ª—è `COMPLETED` –∑–∞–∫–∞–∑–æ–≤

#### 3. –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const contest = db.prepare(`
  SELECT id FROM bot_db.contests
  WHERE is_active = 1
`).get();

if (!contest) {
  return false; // ‚ùå –ë–∏–ª–µ—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—Ç—Å—è
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ssh root@72.56.93.135 "sqlite3 /root/vpn_bot/data/database.sqlite 'SELECT id, title, is_active FROM contests;'"
```

#### 4. –ó–∞–∫–∞–∑ –≤–Ω–µ –ø–µ—Ä–∏–æ–¥–∞ –∫–æ–Ω–∫—É—Ä—Å–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
if (orderDate < contestStart || orderDate > contestEnd) {
  return false; // ‚ùå –ë–∏–ª–µ—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—Ç—Å—è
}
```

#### 5. –ü–ª–∞–Ω `plan_7` (–ø—Ä–æ–±–Ω—ã–π)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
if (planId === 'plan_7') {
  return false; // ‚ùå –ü—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –Ω–µ –¥–∞–µ—Ç –±–∏–ª–µ—Ç–æ–≤
}
```

---

## –¢–∞–π–º–∏–Ω–≥ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ API webhook

```
T+0s:   –ü–ª–∞—Ç–µ–∂ –æ—Ç YooKassa
T+0.1s: Webhook –ø–æ–ª—É—á–µ–Ω API
T+0.2s: –ê–∫—Ç–∏–≤–∞—Ü–∏—è VPN
T+0.3s: awardTicketsForPayment() –≤—ã–∑–≤–∞–Ω
T+0.4s: SQL INSERT –≤—ã–ø–æ–ª–Ω–µ–Ω
T+0.5s: ‚úÖ –ë–ò–õ–ï–¢–´ –ù–ê–ß–ò–°–õ–ï–ù–´

–ò–¢–û–ì–û: < 1 —Å–µ–∫—É–Ω–¥–∞
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ –±–æ—Ç–∞

```
T+0s:   –ü–ª–∞—Ç–µ–∂ –æ—Ç Telegram
T+0.1s: processPayment() –≤—ã–∑–≤–∞–Ω
T+0.2s: activateOrder() –≤—ã–∑–≤–∞–Ω
T+0.3s: –ê–∫—Ç–∏–≤–∞—Ü–∏—è VPN
T+0.4s: awardSelfPurchaseTicket() –≤—ã–∑–≤–∞–Ω
T+0.5s: awardTickets() –≤—ã–∑–≤–∞–Ω (–¥–ª—è —Ä–µ—Ñ–µ—Ä–µ—Ä–∞)
T+0.6s: SQL INSERT –≤—ã–ø–æ–ª–Ω–µ–Ω
T+0.7s: ‚úÖ –ë–ò–õ–ï–¢–´ –ù–ê–ß–ò–°–õ–ï–ù–´

–ò–¢–û–ì–û: < 1 —Å–µ–∫—É–Ω–¥–∞
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä)

```
T+0s:    –ü–ª–∞—Ç–µ–∂ –æ—Ç YooKassa
T+0.1s:  Webhook –ø–æ–ª—É—á–µ–Ω
T+0.2s:  awardTicketsForPayment() –≤—ã–∑–≤–∞–Ω
T+0.3s:  ‚ùå –û–®–ò–ë–ö–ê (–±–∞–∑–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, —Å–µ—Ç—å –∏ —Ç.–¥.)
T+0.4s:  –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤

[–û–∂–∏–¥–∞–Ω–∏–µ...]

T+5min:  –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è
T+5min:  –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
T+5min:  ‚úÖ –ë–ò–õ–ï–¢–´ –ù–ê–ß–ò–°–õ–ï–ù–´ (–ø—Ä–∏ —É—Å–ø–µ—Ö–µ)

–ò–¢–û–ì–û: –î–æ 5 –º–∏–Ω—É—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ (–¢–û–õ–¨–ö–û –ø—Ä–∏ –æ—à–∏–±–∫–µ)
```

---

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ—á–µ–º—É –±–∏–ª–µ—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ API
```bash
ssh root@72.56.93.135 "journalctl -u outlivion-api --since '10 minutes ago' --no-pager | grep -i 'award\|ticket'"
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- ‚úÖ `Tickets awarded successfully` - –Ω–∞—á–∏—Å–ª–µ–Ω–æ
- ‚ùå `Failed to award tickets` - –æ—à–∏–±–∫–∞ (–¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å)
- ‚ö†Ô∏è `No tickets awarded (no referrer or outside contest period)` - —É—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
```bash
ssh root@72.56.93.135 "journalctl --since '10 minutes ago' --no-pager | grep 'vpn_bot\|ContestService\|awardTickets'"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤
```bash
# –ß–µ—Ä–µ–∑ API (—Ç—Ä–µ–±—É–µ—Ç –∞–¥–º–∏–Ω—Å–∫–∏–π —Ç–æ–∫–µ–Ω)
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://api.outlivion.space/v1/admin/award-retry-stats
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "queueSize": 0,  // 0 = –≤—Å–µ –±–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
  "items": []
}
```

–ï—Å–ª–∏ `queueSize > 0` - –µ—Å—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è, –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ–≤—Ç–æ—Ä–∞.

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é
```bash
ssh root@72.56.93.135 "sqlite3 /root/vpn_bot/data/database.sqlite 'SELECT * FROM ticket_ledger WHERE order_id=\"YOUR_ORDER_ID\";'"
```

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–¥–µ—Ä–∂–µ–∫

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ó–∞–¥–µ—Ä–∂–∫–∞ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|----------|------------|
| **–£—Å–ø–µ—à–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (API)** | < 1 —Å–µ–∫ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ webhook |
| **–£—Å–ø–µ—à–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (–±–æ—Ç)** | < 1 —Å–µ–∫ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ |
| **–û—à–∏–±–∫–∞ ‚Üí –ø–æ–≤—Ç–æ—Ä (1-—è –ø–æ–ø—ã—Ç–∫–∞)** | –î–æ 5 –º–∏–Ω | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω |
| **–û—à–∏–±–∫–∞ ‚Üí –ø–æ–≤—Ç–æ—Ä (2-—è –ø–æ–ø—ã—Ç–∫–∞)** | –î–æ 10 –º–∏–Ω | –ï—â–µ +5 –º–∏–Ω—É—Ç |
| **–û—à–∏–±–∫–∞ ‚Üí –ø–æ–≤—Ç–æ—Ä (3-—è –ø–æ–ø—ã—Ç–∫–∞)** | –î–æ 15 –º–∏–Ω | –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ |

---

## –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å

**–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –±–∏–ª–µ—Ç—ã —Å—Ä–∞–∑—É –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è?

**–û—Ç–≤–µ—Ç:** 

‚ùå **–ù–ï–¢**, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 –º–∏–Ω—É—Ç - —ç—Ç–æ **–ù–ï** –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤.

‚úÖ **–ë–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –°–†–ê–ó–£** (< 1 —Å–µ–∫—É–Ω–¥–∞) –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç–µ–∂–∞.

‚ö†Ô∏è **–ó–∞–¥–µ—Ä–∂–∫–∞ 5 –º–∏–Ω—É—Ç** –ø–æ—è–≤–ª—è–µ—Ç—Å—è **–¢–û–õ–¨–ö–û** –µ—Å–ª–∏:
1. –ü–µ—Ä–≤–∏—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —É–ø–∞–ª–æ —Å –æ—à–∏–±–∫–æ–π
2. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤
3. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∂–¥–µ—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞ (–¥–æ 5 –º–∏–Ω—É—Ç)

**–ï—Å–ª–∏ –±–∏–ª–µ—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É** - —ç—Ç–æ –ù–ï –∏–∑-–∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, –∞ –∏–∑-–∑–∞:
- –ó–∞–∫–∞–∑ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ—Ç–æ–º (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞)
- –ó–∞–∫–∞–∑ –≤–Ω–µ –ø–µ—Ä–∏–æ–¥–∞ –∫–æ–Ω–∫—É—Ä—Å–∞
- –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–∞
- –ü–ª–∞–Ω `plan_7` (–ø—Ä–æ–±–Ω—ã–π)
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤)

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ï—Å–ª–∏ –±–∏–ª–µ—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API:**
   ```bash
   journalctl -u outlivion-api -n 100 | grep -i 'award\|ticket'
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞:**
   ```bash
   journalctl -n 100 | grep -i 'contest\|ticket\|award'
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤:**
   ```bash
   curl https://api.outlivion.space/v1/admin/award-retry-stats
   ```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –±—ã–ª–∞ –ª–∏ –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.
