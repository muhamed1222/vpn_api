# üö® –û–ë–ù–ê–†–£–ñ–ï–ù–û: –î–í–ï –ü–†–û–ë–õ–ï–ú–´ –° –ù–ê–ß–ò–°–õ–ï–ù–ò–ï–ú –ë–ò–õ–ï–¢–û–í

**–î–∞—Ç–∞:** 2025-01-18 05:01  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û - –¢–†–ï–ë–£–ï–¢–°–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ë–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é:** 16 –±–∏–ª–µ—Ç–æ–≤ (–±—ã–ª–æ 11 ‚Üí +5 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã)

---

## –ü—Ä–æ–±–ª–µ–º–∞ #1: Telegram Payments (Stars)

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ß—Ç–æ –±—ã–ª–æ:
- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–ª –≤ **WEBHOOK** —Ä–µ–∂–∏–º–µ
- –°–æ–±—ã—Ç–∏—è `successful_payment` –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∏ –¥–æ –±–æ—Ç–∞
- –ë–∏–ª–µ—Ç—ã –ù–ï –Ω–∞—á–∏—Å–ª—è–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚úÖ –í–∫–ª—é—á–µ–Ω **POLLING** —Ä–µ–∂–∏–º (`TELEGRAM_USE_POLLING=1`)
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. ‚úÖ Webhook —É–¥–∞–ª–µ–Ω, –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
4. ‚úÖ –ë–æ—Ç –°–ê–ú –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç Telegram API

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ **–°–ª–µ–¥—É—é—â–∞—è –ø–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ Telegram Stars –î–û–õ–ñ–ù–ê –Ω–∞—á–∏—Å–ª–∏—Ç—å –±–∏–ª–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

---

## –ü—Ä–æ–±–ª–µ–º–∞ #2: YooKassa Webhook

### –°—Ç–∞—Ç—É—Å: ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (–ö–†–ò–¢–ò–ß–ù–û!)

### –ß—Ç–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ:

#### –í–∞—à –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑:
- **ID:** `ord_6189148a-91d4-4788-a793-f5671e83707b`
- **–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:** YooKassa (—á–µ—Ä–µ–∑ —Å–∞–π—Ç)
- **–°—Ç–∞—Ç—É—Å:** `COMPLETED` (–æ–ø–ª–∞—á–µ–Ω —É—Å–ø–µ—à–Ω–æ)
- **–í—Ä–µ–º—è:** 2026-01-18 04:59:19
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∏–ª–µ—Ç –ù–ï –Ω–∞—á–∏—Å–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚ùå

#### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ API:
```bash
# –ü–æ–∏—Å–∫ webhook –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç
journalctl -u outlivion-api.service --since '30 minutes ago' | grep -E 'webhook|payment'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–£–°–¢–û (0 –∑–∞–ø–∏—Å–µ–π) ‚ùå

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- Webhook –æ—Ç YooKassa **–ù–ï –î–û–®–ï–õ** –¥–æ API
- –ò–ª–∏ webhook URL –≤ YooKassa –∫–∞–±–∏–Ω–µ—Ç–µ **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô**
- –ò–ª–∏ YooKassa –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ `https://api.outlivion.space/v1/payments/webhook`

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞—Ç–µ–∂–∏ —Å–µ–π—á–∞—Å

### –ü—É—Ç—å 1: Telegram Payments (Stars)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –û–ø–ª–∞—Ç–∞ –≤ –±–æ—Ç–µ (Stars) 
‚Üí Telegram API ‚Üí –ë–æ—Ç (polling) 
‚Üí successful_payment event 
‚Üí processPayment() 
‚Üí ContestService.awardSelfPurchaseTicket() 
‚Üí ‚úÖ –ë–∏–ª–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–û–õ–ñ–ù–û –†–ê–ë–û–¢–ê–¢–¨ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

---

### –ü—É—Ç—å 2: YooKassa (—Å–∞–π—Ç/miniapp)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –û–ø–ª–∞—Ç–∞ –Ω–∞ —Å–∞–π—Ç–µ 
‚Üí YooKassa ‚Üí ??? Webhook –ù–ï –î–û–•–û–î–ò–¢ ??? 
‚Üí /v1/payments/webhook –ù–ï –í–´–ó–´–í–ê–ï–¢–°–Ø 
‚Üí awardTicketsForPayment() –ù–ï –í–´–ó–´–í–ê–ï–¢–°–Ø 
‚Üí ‚ùå –ë–∏–ª–µ—Ç –ù–ï –Ω–∞—á–∏—Å–ª–µ–Ω
```

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢!

---

## –ü–æ—á–µ–º—É YooKassa webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ #1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≤ YooKassa

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ó–∞–π—Ç–∏ –≤ [YooKassa –∫–∞–±–∏–Ω–µ—Ç](https://yookassa.ru/my/shop-settings/developer-settings)
2. –†–∞–∑–¥–µ–ª "HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL webhook

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
https://api.outlivion.space/v1/payments/webhook
```

**–ï—Å–ª–∏ —Ç–∞–º –¥—Ä—É–≥–æ–π URL** ‚Üí –∏—Å–ø—Ä–∞–≤–∏—Ç—å!

---

### –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ #2: YooKassa –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:**
```bash
curl -X POST https://api.outlivion.space/v1/payments/webhook \
  -H "Content-Type: application/json" \
  -d '{"test": "connection"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 200 –∏–ª–∏ 400 (–ø–ª–æ—Ö–æ–π –∑–∞–ø—Ä–æ—Å)
- –ù–ï 502/503/504 (—Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

---

### –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ #3: Nginx –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx:**
```bash
ssh root@72.56.93.135 "cat /etc/nginx/sites-available/api.outlivion.space | grep -A 10 'location.*payments.*webhook'"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```nginx
location /v1/payments/webhook {
    proxy_pass http://127.0.0.1:3001;
    # ...
}
```

---

### –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ #4: API –Ω–µ —Å–ª—É—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ API:**
```bash
ssh root@72.56.93.135 "systemctl status outlivion-api.service"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
Active: active (running)
```

---

## –ß—Ç–æ –Ω–∞—á–∏—Å–ª–µ–Ω–æ –≤—Ä—É—á–Ω—É—é

| –ó–∞–∫–∞–∑ | –ë–∏–ª–µ—Ç—ã | –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã | –î–∞—Ç–∞ |
|-------|--------|---------------|------|
| `ord_1c186eab...` | +1 | Telegram Stars | 2026-01-18 04:43 |
| `ord_b9cf0b5b...` | +1 | Telegram Stars | 2026-01-18 04:43 |
| `ord_63d529be...` | +1 | Telegram Stars | 2026-01-18 04:43 |
| `ord_6734560e...` | +1 | Telegram Stars | 2026-01-18 04:52 |
| `ord_6189148a...` | +1 | YooKassa | 2026-01-18 05:01 |
| (–ø—Ä–æ—à–ª—ã–µ) | 11 | –†–∞–∑–Ω–æ–µ | (—Ä–∞–Ω—å—à–µ) |

**–ò—Ç–æ–≥–æ:** 16 –±–∏–ª–µ—Ç–æ–≤

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã YooKassa

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å webhook URL –≤ YooKassa (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. –ó–∞–π—Ç–∏ –≤ [YooKassa –∫–∞–±–∏–Ω–µ—Ç](https://yookassa.ru/my/shop-settings/developer-settings)
2. –ù–∞–π—Ç–∏ "HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å URL: `https://api.outlivion.space/v1/payments/webhook`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –æ–ø–ª–∞—Ç—É

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å fallback –º–µ—Ö–∞–Ω–∏–∑–º

**–ï—Å–ª–∏ webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç, API –º–æ–∂–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π:**

```typescript
// –í src/routes/v1/payments.ts –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
setInterval(async () => {
    // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ pending –ø–ª–∞—Ç–µ–∂–∏ —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç
    const pendingPayments = await getPendingPaymentsOlderThan(5 * 60 * 1000);
    
    for (const payment of pendingPayments) {
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ YooKassa
        const status = await yookassaService.getPaymentStatus(payment.yookassaPaymentId);
        
        if (status === 'succeeded') {
            // –ù–∞—á–∏—Å–ª–∏—Ç—å –±–∏–ª–µ—Ç—ã
            await awardTicketsForPayment(payment.orderId);
        }
    }
}, 5 * 60 * 1000); // –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
```

**–ü–ª—é—Å—ã:**
- –ù–∞–¥–µ–∂–Ω–µ–µ (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç webhook)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

**–ú–∏–Ω—É—Å—ã:**
- –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–æ 5 –º–∏–Ω—É—Ç
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ YooKassa API

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ YooKassa:**

```bash
# 1. –ù–∞–π—Ç–∏ –∑–∞–∫–∞–∑—ã –±–µ–∑ –±–∏–ª–µ—Ç–æ–≤
ssh root@72.56.93.135 'sqlite3 /root/vpn_bot/data/database.sqlite "
SELECT o.id, o.user_id, datetime(o.created_at/1000, '\''unixepoch'\'')
FROM orders o
LEFT JOIN ticket_ledger t ON t.order_id = o.id
WHERE o.status = '\''COMPLETED'\''
  AND o.plan_id != '\''plan_7'\''
  AND o.provider = '\''yookassa'\''
  AND t.id IS NULL
ORDER BY o.created_at DESC
LIMIT 10;
"'

# 2. –ù–∞—á–∏—Å–ª–∏—Ç—å –±–∏–ª–µ—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ ORDER_ID –∏ USER_ID)
ssh root@72.56.93.135 'sqlite3 /root/vpn_bot/data/database.sqlite "
INSERT INTO ticket_ledger (id, contest_id, referrer_id, referred_id, order_id, delta, reason, created_at)
VALUES (
  '\''ticket_ORDER_ID_'\'' || strftime('\''%s'\'', '\''now'\'') || '\''000'\'',
  '\''550e8400-e29b-41d4-a716-446655440000'\'',
  USER_ID,
  USER_ID,
  '\''ORDER_ID'\'',
  1,
  '\''SELF_PURCHASE'\'',
  datetime('\''now'\'')
);
"'
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: Telegram Payments ‚úÖ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —Ç–∞—Ä–∏—Ñ
3. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram Stars
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–ª–µ—Ç—ã –≤ –±–æ—Ç–µ

**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ë–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 —Å–µ–∫—É–Ω–¥

---

### –¢–µ—Å—Ç 2: YooKassa ‚ùå

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –∏–ª–∏ miniapp
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
3. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ YooKassa
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–ª–µ—Ç—ã –≤ –±–æ—Ç–µ

**–û–∂–∏–¥–∞–µ—Ç—Å—è (—Å–µ–π—á–∞—Å):** –ë–∏–ª–µ—Ç—ã –ù–ï –Ω–∞—á–∏—Å–ª—è—Ç—Å—è ‚ùå  
**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ë–∏–ª–µ—Ç—ã –Ω–∞—á–∏—Å–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ‚úÖ Telegram Payments
- **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—è—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ‚ùå YooKassa
- **–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –∏ –≤ miniapp
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –î–ª—è —á–µ–≥–æ |
|------|-----------|----------|
| `/root/vpn_bot/.env` | `TELEGRAM_USE_POLLING=1` | Telegram Payments fix |
| `/root/vpn_bot/server.ts` | DEBUG –ª–æ–≥ (—Å—Ç—Ä–æ–∫–∞ 25) | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |
| `/root/vpn_bot/src/bot/index.ts` | –õ–æ–≥–∏ –≤ `successful_payment` | Telegram Payments –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |
| `/root/vpn_bot/src/services/orderProcessingService.ts` | –õ–æ–≥–∏ –≤ `activateOrder` | –û–±—â–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Telegram Payments (–∫—É–ø–∏—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞)
2. üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL webhook –≤ YooKassa –∫–∞–±–∏–Ω–µ—Ç–µ
3. üîç –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `/v1/payments/webhook`

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
4. üîß –ò—Å–ø—Ä–∞–≤–∏—Ç—å YooKassa webhook
5. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å YooKassa (–∫—É–ø–∏—Ç—å —á–µ—Ä–µ–∑ —Å–∞–π—Ç)
6. üìù –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ

---

## –ò—Ç–æ–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| Telegram Bot (Polling) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç |
| Telegram Payments | ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| YooKassa Webhook | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | Webhook –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç |
| –†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 16 –±–∏–ª–µ—Ç–æ–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–æ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è |
| API —Å–µ—Ä–≤–µ—Ä | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã |

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **Telegram Payments:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
‚ùå **YooKassa:** –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook  
‚úÖ **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  

**–í–∞—à–∏ –±–∏–ª–µ—Ç—ã:** 16 (–Ω–∞—á–∏—Å–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é –∑–∞ –≤—Å–µ –∑–∞–∫–∞–∑—ã)

---

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook –≤ YooKassa –∫–∞–±–∏–Ω–µ—Ç–µ!
