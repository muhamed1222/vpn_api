# üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–Ω–∫—É—Ä—Å–∞

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–Ω–∫—É—Ä—Å–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–∫–∞–∑–∞—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Excel.

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `ADMIN_ID` –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- –ü—Ä–∏–º–µ—Ä: `ADMIN_ID=12345678,87654321`

**–°–ø–æ—Å–æ–±—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
1. **Telegram initData** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Admin API Key** ‚Äî —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-admin-api-key` (–¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤)

## üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**–§—Ä–æ–Ω—Ç–µ–Ω–¥:**
- URL: `/admin/contest`
- –§–∞–π–ª: `vpnwebsite/app/admin/contest/page.tsx`

**API:**
- Backend: `GET /v1/admin/contest/participants?contest_id={id}`
- Frontend: `GET /api/admin/contest/participants?contest_id={id}`
- –§–∞–π–ª –±—ç–∫–µ–Ω–¥–∞: `vpn_api/src/routes/v1/admin.ts`
- –§–∞–π–ª —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `vpnwebsite/app/api/admin/contest/participants/route.ts`

## üìä –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞:
- **–ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ** (rank)
- **Telegram ID —É—á–∞—Å—Ç–Ω–∏–∫–∞** (referrer_id)
- **–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞** (referrer_name)
- **Username** (referrer_username)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤** (tickets_total)
- **–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π** (invited_total)
- **–ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π** (qualified_total)

### –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤:
- **ID –∑–∞–∫–∞–∑–∞** (order_id)
- **–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã** (payment_date) ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO datetime
- **ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ** (invitee_id)
- **–ò–º—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ** (invitee_name)
- **–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω** (plan_id)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤** (months)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤** (tickets)

## üì§ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel)
- –§–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è: `contest_participants_{contest_id}_{date}.csv`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞:**
```
–ú–µ—Å—Ç–æ;ID —É—á–∞—Å—Ç–Ω–∏–∫–∞;–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞;Username;–ë–∏–ª–µ—Ç–æ–≤ –≤—Å–µ–≥–æ;–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π;–ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö;ID –∑–∞–∫–∞–∑–∞;–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã;ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ;–ò–º—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ;–¢–∞—Ä–∏—Ñ;–ú–µ—Å—è—Ü–µ–≤;–ë–∏–ª–µ—Ç–æ–≤
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ù–∞ API —Å–µ—Ä–≤–µ—Ä–µ:**
```env
ADMIN_ID=12345678  # –í–∞—à Telegram ID (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–¥–º–∏–Ω–æ–≤)
BOT_DATABASE_PATH=/path/to/vpn_bot/data/database.sqlite
```

### 2. –î–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ URL: `https://my.outlivion.space/admin/contest`
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à Telegram ID
4. –ï—Å–ª–∏ –≤—ã –≤ —Å–ø–∏—Å–∫–µ `ADMIN_ID`, –¥–æ—Å—Ç—É–ø –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö

- **–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤** ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—É—Ä—Å–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 4. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel"
2. –§–∞–π–ª CSV –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ Excel –∏–ª–∏ –¥—Ä—É–≥–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Ç–∞–±–ª–∏—Ü

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend API

**Endpoint:** `GET /v1/admin/contest/participants?contest_id={id}`

**–û—Ç–≤–µ—Ç:**
```json
{
  "participants": [
    {
      "referrer_id": 12345678,
      "referrer_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "referrer_username": "ivan_ivanov",
      "tickets_total": 12,
      "invited_total": 5,
      "qualified_total": 3,
      "rank": 1,
      "orders": [
        {
          "order_id": "order-123",
          "payment_date": "2026-01-16T10:30:00.000Z",
          "invitee_id": 87654321,
          "invitee_name": "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤",
          "plan_id": "plan_90",
          "months": 3,
          "tickets": 3
        }
      ]
    }
  ]
}
```

**–û—à–∏–±–∫–∏:**
- `401 Unauthorized` ‚Äî –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403 Forbidden` ‚Äî –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `404 Not Found` ‚Äî –∫–æ–Ω–∫—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω

### Frontend API Route

**Endpoint:** `GET /api/admin/contest/participants?contest_id={id}`

**–ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π Telegram initData.

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `ADMIN_ID`
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. **–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã:** –î–∞—Ç—ã –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ (2026-01-16T10:30:00.000Z)
4. **CSV —Ñ–æ—Ä–º–∞—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π (`;`) –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è Excel –≤ –†–æ—Å—Å–∏–∏)
5. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8 —Å BOM –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Excel

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∞—à Telegram ID —É–∫–∞–∑–∞–Ω –≤ `ADMIN_ID` –Ω–∞ API —Å–µ—Ä–≤–µ—Ä–µ
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `ADMIN_ID`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Telegram Mini App

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `BOT_DATABASE_PATH` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ API —Å–µ—Ä–≤–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω–∫—É—Ä—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: CSV —Ñ–∞–π–ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ Excel —á–µ—Ä–µ–∑ "–î–∞–Ω–Ω—ã–µ" ‚Üí "–ò–∑ —Ç–µ–∫—Å—Ç–∞/CSV"
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å "–¢–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π"

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ API endpoint —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ADMIN_ID —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

**–°–æ–∑–¥–∞–Ω–æ:** 16 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0
